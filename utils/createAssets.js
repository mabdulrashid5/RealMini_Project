import { Asset } from 'expo-asset';
import * as FileSystem from 'expo-file-system';

// Base64 encoded PNG data for both splash and icon
const splashBase64 = `iVBORw0KGgoAAAANSUhEUgAACAAAAAgACAYAAAB9o7WcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF0WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNy4yLWMwMDAgNzkuMWI2NWE3OWI0LCAyMDIyLzA2LzEzLTIyOjAxOjAxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjQuMCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjUtMDgtMTNUMTQ6NDU6MzYtMDQ6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjUtMDgtMTNUMTQ6NDU6MzYtMDQ6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDI1LTA4LTEzVDE0OjQ1OjM2LTA0OjAwIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNhMWJmMmY5LTY5ZDItNGE1NC1hMmJjLTMxOTZiNjQ0ZjgyYyIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjNhMWJmMmY5LTY5ZDItNGE1NC1hMmJjLTMxOTZiNjQ0ZjgyYyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjNhMWJmMmY5LTY5ZDItNGE1NC1hMmJjLTMxOTZiNjQ0ZjgyYyIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjNhMWJmMmY5LTY5ZDItNGE1NC1hMmJjLTMxOTZiNjQ0ZjgyYyIgc3RFdnQ6d2hlbj0iMjAyNS0wOC0xM1QxNDo0NTozNi0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI0LjAgKE1hY2ludG9zaCkiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+`;

const iconBase64 = `iVBORw0KGgoAAAANSUhEUgAABAAAAAQACAYAAAB/HSuDAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF0WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNy4yLWMwMDAgNzkuMWI2NWE3OWI0LCAyMDIyLzA2LzEzLTIyOjAxOjAxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjQuMCAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjUtMDgtMTNUMTQ6NDU6MzYtMDQ6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMjUtMDgtMTNUMTQ6NDU6MzYtMDQ6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDI1LTA4LTEzVDE0OjQ1OjM2LTA0OjAwIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNhMWJmMmY5LTY5ZDItNGE1NC1hMmJjLTMxOTZiNjQ0ZjgyYyIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjNhMWJmMmY5LTY5ZDItNGE1NC1hMmJjLTMxOTZiNjQ0ZjgyYyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjNhMWJmMmY5LTY5ZDItNGE1NC1hMmJjLTMxOTZiNjQ0ZjgyYyIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjNhMWJmMmY5LTY5ZDItNGE1NC1hMmJjLTMxOTZiNjQ0ZjgyYyIgc3RFdnQ6d2hlbj0iMjAyNS0wOC0xM1QxNDo0NTozNi0wNDowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDI0LjAgKE1hY2ludG9zaCkiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+`;

export const createSplashAndIcon = async () => {
  try {
    // Create splash.png
    const splashPath = FileSystem.documentDirectory + 'splash.png';
    await FileSystem.writeAsStringAsync(splashPath, splashBase64, {
      encoding: FileSystem.EncodingType.Base64,
    });
    
    // Create icon.png
    const iconPath = FileSystem.documentDirectory + 'icon.png';
    await FileSystem.writeAsStringAsync(iconPath, iconBase64, {
      encoding: FileSystem.EncodingType.Base64,
    });
    
    // Copy files to assets directory
    await FileSystem.copyAsync({
      from: splashPath,
      to: Asset.fromModule(require('../assets/images/splash.png')).uri
    });
    
    await FileSystem.copyAsync({
      from: iconPath,
      to: Asset.fromModule(require('../assets/images/icon.png')).uri
    });
    
    console.log('Splash and icon images created successfully');
  } catch (error) {
    console.error('Error creating splash and icon:', error);
  }
};
